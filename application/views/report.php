<div class="row"> <div class="col-sm-12 "> <legend><strong ><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> ລາຍງານ </strong></legend> <br> <div class="form-inline"> <div class="form-group"> <div id="filterDate2"> <div class="input-group date" data-date-format="dd/mm/yyyy"> <div class="input-group-addon mtype"> <input  type="radio" name="mtype" class="td"> ປະຈຳວັນ <input  type="radio" name="mtype" class="tm"> ປະຈຳເດືອນ <input type="hidden" id="mtype" class="form-control" value=""> </div> <input  type="text" class="form-control date2" placeholder="ວວ/ດດ/ປປປປ" style="display: none;" > <input  type="text" class="form-control date3" placeholder="ດດ/ປປປປ" style="display: none;"> <input  type="text" class="form-control date0" > </div> </div> </div> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"> ປະເພດເອກະສານ: </div> <select class="form-control doc_type"> <option value="" >= ປະເພດເອກະສານ =</option> <option value="in"> ຂາເຂົ້າ </option> <option value="out"> ຂາອອກ </option> </select> </div> </div> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"> ໝວດເອກະສານ: </div> <select class="form-control doc_cat" disabled> <option value="" >= ໜວດເອກະສານ =</option> </select> <select class="form-control doc_cat_in"> <option value="" >= ໜວດເອກະສານ =</option> <?php foreach($sh_gno_in  as $grono){  ?> <option value="<?php echo $grono['id']; ?>"> <?php echo $grono['grono_name']; ?></option> <?php } ?> </select> <select class="form-control doc_cat_out"> <option value="" >= ໜວດເອກະສານ =</option> <?php foreach($sh_gno_out  as $grono){  ?> <option value="<?php echo $grono['id']; ?>"> <?php echo $grono['grono_name']; ?></option> <?php } ?> </select> </div> </div> <p style="margin-top: 10px; text-align: center;"> <button type="button" class="btn btn-default cr_report" disabled> <i class="fa fa-file-pdf-o"></i>  ສ້າງລາຍງານ</button> </p> </div> </div> <div class="container-fluid sh_report" style="display: none;"> <object data="<?php echo base_url('report/report.pdf');?>" type="application/pdf" width="100%" height="1020" class="src_pdf"></object> </div> <script type="text/javascript"> $('.td').click(function(event){$('.date0').hide(); $('.date2').show(); $('.date3').hide(); $('.date2').datepicker({format: "dd/mm/yyyy"}).focus(); $('#mtype').val('td'); ch_bt_report(); }); $('.tm').click(function(event){$('.date0').hide(); $('.date3').show(); $('.date2').hide(); $('.date3').datepicker({format: "mm/yyyy", startView: "months", minViewMode: "months"}).focus(); $('#mtype').val('tm'); ch_bt_report(); }); $('.cr_report').click(function(e){var urlh = window.location.href+'#'; var hash = urlh.split('#')[1]; var url = urlh.split('#')[0]; var mtype = $('#mtype').val(); var mda = $('.date2').val(); var mdb = $('.date3').val(); var doc_cat = $('.doc_cat').val(); var doc_type = $('.doc_type').val(); var get_re = true; var date_month = ''; var dc_in = $('.doc_cat_in').val(); var dc_out = $('.doc_cat_out').val(); if(doc_type=='in'){doc_cat=dc_in; } else {if(doc_type=='out'){doc_cat=dc_out; } } if(mtype=='td'){if(mda==''){$('.date2').focus(); get_re=false; } else { get_re=true; date_month=mda;} } if(mtype=='tm'){if(mdb==''){$('.date3').focus(); get_re=false; } else { get_re=true; date_month=mdb;} } if(get_re==true){$('.img-loading').show(); $.post(url+'index.php/'+'load_page',{ page:'cr_report',mtype:mtype, date_month:date_month, doc_cat:doc_cat, doc_in_out:doc_type} ,function(data){if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {$('.sh_report').html('<form method="get" action="'+url+'report/report.pdf"><center><button type="submit" class="btn btn-default" ><i class="fa fa-file-pdf-o"></i> ດາວໂຫລດເອກະສານ PDF</button></center></form>'); } else {$('.src_pdf').attr('data',url+'report/report.pdf'); } $('.sh_report').slideDown('show'); $('.cr_report').attr('disabled', true); $('.cr_report').attr('class', 'btn btn-default cr_report'); $('.img-loading').hide(); }); } }); $('.date2').focus(function(e){ch_bt_report(); }); $('.date3').focus(function(e){ch_bt_report(); }); $('.doc_cat_in').hide(); $('.doc_cat_out').hide(); $('.doc_cat').change(function(e){ch_bt_report(); }); $('.doc_cat_in').change(function(e){ch_bt_report(); }); $('.doc_cat_out').change(function(e){ch_bt_report(); }); $('.doc_type').change(function(e){ch_bt_report(); var doc_type = $('.doc_type').val(); if(doc_type=='in'){$('.doc_cat').hide(); $('.doc_cat_out').hide(); $('.doc_cat_in').show(); } else {if(doc_type=='out'){$('.doc_cat').hide(); $('.doc_cat_in').hide(); $('.doc_cat_out').show(); } else{$('.doc_cat_in').hide(); $('.doc_cat_out').hide(); $('.doc_cat').show(); } } }); function ch_bt_report(){$('.cr_report').attr('class', 'btn btn-default cr_report'); $('.cr_report').attr('disabled', true); var mtype = $('#mtype').val(); var mda = $('.date2').val(); var mdb = $('.date3').val(); var dc_in = $('.doc_cat_in').val(); var dc_out = $('.doc_cat_out').val(); var doc_cat = $('.doc_cat').val(); var doc_type = $('.doc_type').val(); if(doc_type=='in'){doc_cat=dc_in; } else {if(doc_type=='out'){doc_cat=dc_out; } } if(mtype!=''){if(doc_cat!=''){if(doc_type!=''){$('.cr_report').attr('disabled', false); $('.cr_report').attr('class', 'btn btn-primary cr_report'); } } } } </script>